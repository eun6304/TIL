# 2. 데이터 타입 및 구조
 

* String
> 단순 문자열 데이터로, `기본적인 키-값 쌍`을 나타낸다.

* List
> `순서`가 있는 문자열 리스트로, `FIFO(First In First Out)` 큐와 같은 동작을 한다.

* Set
> `중복 없는 문자열 집합`으로, 집합 연산(교집합, 합집합, 차집합)을 지원한다.

* Hash
> `키-필드-값` 구조로, 객체 데이터를 저장하는 데 유용하다.

* Sorted Set
> `점수`를 기준으로 정렬된 문자열 집합으로, `순위 데이터`를 저장하는 데 적합하다.

* Bitmap
> 비트 배열로, 비트 연산을 수행할 수 있다.

* HyperLogLog
> 대용량 데이터의 근사 중복 계산에 사용된다

* Stream
> 시간 순서대로 정렬된 로그 데이터를 저장한다.

* Geospatial Indexes
> 지리적 위치 정보를 저장하고, 관련 쿼리를 지원한다.

## 2.1. String
#### Redis의 String 타입은 가장 기본적이고 자주 사용되는 데이터 타입이다. Redis의 String은 단순한 `문자열`뿐만 아니라, 숫자, 바이너리 데이터, JSON, XML 등 다양한 형식의 데이터를 저장할 수 있다. Redis에서 String은 최대 512MB까지 저장 가능하다.

### 2.1.1. String 데이터 타입 주요 특징
* 단일 키-값 쌍
  * `하나의 키가 하나의 값`을 가진다.
* 다양한 데이터 지원
  * 문자열 외에도 `숫자`, `JSON`, `바이너리` 등 다양한 형식의 데이터를 저장할 수 있다.
* 고성능
  * 매우 빠른 읽기 및 쓰기 성능을 제공한다.

### 2.1.2. 주요 String 관련 명령어
*  SET
   * 형식: `SET key value [EX seconds] [PX milliseconds] [NX|XX]`
   * 설명: 주어진 키에 값을 저장한다. 옵션으로 `만료 시간`을 설정할 수 있으며, `NX(키가 존재하지 않을 때만)` 또는 `XX(키가 존재할 때만)` 플래그를 사용할 수 있다.
   * 예시:
        ```
        SET mykey "hello"
        SET mykey "world" EX 10 NX  
        # mykey가 없을 경우 10초 동안 저장
        ```
*  GET
   * 형식: `GET key`
   * 설명: 주어진 키에 저장된 값을 반환한다.
   * 예시:
      ```
      GET mykey
      ```
*  INCR
   * 형식: `INCR key`
   * 설명: 저장된 값을 `1만큼 증가`시킨다. 값은 반드시 `정수`여야 하며, 해당 키가 없을 경우 0으로 초기화한 후 증가시킨다.
   * 예시:
      ```
      INCR counter
      ```
*  DECR
   * 형식: `DECR key`
   * 설명: 저장된 값을 `1만큼 감소`시킨다.
   * 예시:
      ```
      DECR counter
      ```
*  MGET
   * 형식: `MGET key1 key2 ...`
   * 설명: `여러 키의 값`을 한 번에 가져온다.
   * 예시:
      ```
      MGET key1 key2 key3
      ```
*  SETEX
   * 형식: `SETEX key seconds value`
   * 설명: 주어진 키에 값을 저장하고, `해당 값의 만료 시간`을 초 단위로 설정한다.
   * 예시:
      ```
      SETEX mykey 60 "temporary value"  # 60초 후 만료
      ```
*  GETSET
   * 형식: `GETSET key value`
   * 설명: 주어진 키에 `새 값을 설정`하고, `이전 값을 반환`한다.
   * 예시:
      ```
      GETSET mykey "newvalue"
      ```
*  APPEND
   * 형식: `APPEND key value`
   * 설명: 기존 문자열에 `값을 덧붙인다`. 만약 `키가 없다면 새로 생성`된다.
   * 예시:
      ```
      APPEND mykey " world"
      ```
*  STRLEN
   * 형식: `STRLEN key`
   * 설명: `문자열의 길이`를 반환한다.
   * 예시:
      ```
      STRLEN mykey
      ```
## 2.2. List
#### `Redis의 List 타입`은 `연결 리스트(Linked List)` 구조로 구현되어 있다. 이 리스트는 `양방향`으로 데이터를 처리할 수 있으며, 리스트의 양 끝에서 데이터를 삽입하거나 삭제하는 것이 매우 빠르다. `FIFO(First In, First Out)`` 방식의 큐처럼 사용할 수 있어 대기열, 작업 목록, 메시지 큐 등의 기능을 구현하는 데 유용하다.

### 2.2.1. List 데이터 타입 주요 특징
* `양방향`` 리스트
  *  리스트의 양 끝에서 데이터를 삽입하고 삭제할 수 있다.
* `순차`` 데이터 처리
  *  순차적으로 데이터를 처리하는 데 적합하며, 스택이나 큐로 활용 가능.
* `빠른 연산``
  *  리스트의 양 끝에서의 삽입과 삭제 연산이 매우 빠르다.

### 2.2.2. 주요 List 관련 명령어
*  LPUSH
   * 형식: `LPUSH key value [value ...]`
   * 설명: 리스트의 `왼쪽(앞쪽)`에 하나 이상의 값을 `삽입`한다.
   * 예시:
      ```
      LPUSH mylist "world"
      LPUSH mylist "hello"  # 리스트는 ["hello", "world"]가 된다.
      ```
*  RPUSH
   * 형식: `RPUSH key value [value ...]`
   * 설명: 리스트의 `오른쪽(뒤쪽)`에 하나 이상의 값을 `삽입`한다.
   * 예시:
      ```
      RPUSH mylist "hello"
      RPUSH mylist "world"  # 리스트는 ["hello", "world"]가 된다.
      ```
*  LPOP
   * 형식: `LPOP key`
   * 설명: 리스트의 `왼쪽(앞쪽)`에서 `첫 번째 요소를 제거`하고 `반환`한다.
   * 예시:
      ```
      LPOP mylist  # "hello"를 반환하고, 리스트는 ["world"]가 된다.
      ```
*  RPOP
   * 형식: `RPOP key`
   * 설명: 리스트의 `오른쪽(뒤쪽)`에서 `마지막 요소를 제거`하고 `반환`한다.
   * 예시:
     ```
     RPOP mylist  # "world"를 반환하고, 리스트는 ["hello"]가 된다.
     ```
*  LLEN
   * 형식: `LLEN key`
   * 설명: `리스트의 길이`를 반환한다.
   * 예시:
     ```
     LLEN mylist  # 리스트에 있는 요소의 개수를 반환한다.
     ```
*  LRANGE
   * 형식: `LRANGE key start stop`
   * 설명: 주어진 범위에 있는 `리스트의 요소들을 반환`한다. `start`는 시작 인덱스, `stop`은 끝 인덱스를 의미한다.
   * 예시:
     ```
     LRANGE mylist 0 -1  # 리스트의 모든 요소를 반환한다.
     LRANGE mylist 0 1   # 첫 번째와 두 번째 요소를 반환한다.
     ```
*  LSET
   * 형식: `LSET key index value`
   * 설명: 리스트에서 주어진 인덱스에 있는 `요소의 값을 변경`한다.
   * 예시:
     ```
     LSET mylist 1 "newvalue"  # 인덱스 1의 값을 "newvalue"로 변경한다.
     ```
*  LREM
   * 형식: `LREM key count value`
   * 설명: 리스트에서 `주어진 값과 일치하는 요소를 제거`한다. `count`가 `양수`이면 왼쪽에서부터, `음수`이면 오른쪽에서부터 지정된 개수만큼 값을 제거한다. `count`가 `0`이면 리스트 내의 `모든 일치하는 요소`를 제거한다.
   * 예시:
     ```
     LREM mylist 1 "hello"  # 왼쪽에서 첫 번째 "hello"를 제거한다.
     ```
*  LINSERT
   * 형식: `LINSERT key BEFORE|AFTER pivot value`
   * 설명: 리스트 내에서 `pivot` 요소의 `앞 또는 뒤`에 새 값을 `삽입`한다.
   * 예시:
     ```
     LINSERT mylist BEFORE "world" "there"  
     # "world" 앞에 "there"를 삽입한다.
     ```
*  RPOPLPUSH
   * 형식: `RPOPLPUSH source destination`
   * 설명: 리스트의 `오른쪽 끝에서 요소를 제거`하고, `다른 리스트의 왼쪽에 삽입`한다. 주로 작업 대기열에서 작업을 이동할 때 사용된다.
   * 예시:
     ```
     RPOPLPUSH mylist1 mylist2  
     # mylist1의 마지막 요소를 mylist2의 첫 번째 요소로 이동한다.
     ```
*  BLPOP & BRPOP
   * 형식: `BLPOP key [key ...] timeout, BRPOP key [key ...] timeout`
   * 설명: LPOP과 RPOP의 `차단(blocking)` 버전으로, `주어진 키에 값이 없으면 지정된 시간 동안 대기`한다.
   * 예시:
     ```
     BLPOP mylist 5  # mylist가 비어있으면 5초 동안 대기한다.
     ```

### 2.2.3. 사용 예시
```
# 리스트 값 삽입
RPUSH tasks "task1" "task2"
LPUSH tasks "urgent_task"

# 리스트 값 조회
LRANGE tasks 0 -1  # 모든 리스트 요소 조회

# 리스트 값 삭제 및 이동
LPOP tasks  # 왼쪽 첫 번째 값 제거
RPOPLPUSH tasks completed_tasks  # 작업 완료 리스트로 이동
```

>**Redis**의 **List 타입**은 주로 작업 대기열, 메시지 큐와 같은 시나리오에서 많이 활용되며, **데이터 처리 순서**를 관리하는 데 적합한 구조이다.